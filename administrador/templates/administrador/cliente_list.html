{% extends 'administrador/base_list.html' %}
{% load static %}

{% block title %}Clientes | Digit Soft{% endblock %}
{% block page_header %}Clientes{% endblock %}

{% block list_title %}Gestión de Clientes{% endblock %}
{% block list_description %}Administra la información de tus clientes{% endblock %}

{% block table_headers %}
<th>Documento</th>
<th>Cliente</th>
<th>Tipo</th>
<th>Email</th>
<th>Teléfono</th>
<th>Estado</th>
<th style="width: 200px;">Acciones</th>
{% endblock %}

{% block table_body %}
{% if clientes %}
    {% for cliente in clientes %}
    <tr>
        <td><strong>{{ cliente.numero_documento }}</strong></td>
        <td>{{ cliente.nombre_completo }}</td>
        <td>
            <span class="badge badge-info">
                {{ cliente.get_tipo_cliente_display }}
            </span>
        </td>
        <td>{{ cliente.email }}</td>
        <td>{{ cliente.telefono }}</td>
        <td>
            {% if cliente.activo %}
                <span class="badge badge-success">Activo</span>
            {% else %}
                <span class="badge badge-danger">Inactivo</span>
            {% endif %}
        </td>
        <td>
            <div class="actions-cell">
                <button class="btn btn-info btn-sm" onclick="viewDetails({{ cliente.id }})" title="Ver detalles">
                    <i class="fas fa-eye"></i>
                </button>
                <button class="btn btn-primary btn-sm" onclick="editRecord({{ cliente.id }})" title="Editar">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn btn-warning btn-sm" onclick="viewHistory({{ cliente.id }}, '{{ cliente.nombre_completo }}')" title="Historial">
                    <i class="fas fa-history"></i>
                </button>
                <button class="btn btn-danger btn-sm" onclick="deleteRecord({{ cliente.id }}, '{{ cliente.nombre_completo }}')" title="Eliminar">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </td>
    </tr>
    {% endfor %}
{% else %}
    <tr>
        <td colspan="7" class="empty-state">
            <i class="fas fa-users"></i>
            <p>No hay clientes registrados</p>
            <button class="btn btn-primary" onclick="openModal('createModal')">
                <i class="fas fa-plus"></i> Agregar Primer Cliente
            </button>
        </td>
    </tr>
{% endif %}
{% endblock %}

{% block form_content %}
<div class="row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
    <div class="form-group">
        <label class="form-label">Tipo de Documento *</label>
        <select name="tipo_documento" class="form-control" required>
            <option value="">Seleccione...</option>
            <option value="CC">Cédula de Ciudadanía</option>
            <option value="CE">Cédula de Extranjería</option>
            <option value="NIT">NIT</option>
            <option value="PAS">Pasaporte</option>
        </select>
    </div>
    <div class="form-group">
        <label class="form-label">Número de Documento *</label>
        <input type="text" name="numero_documento" class="form-control" required placeholder="Ej: 1234567890">
    </div>
</div>

<div class="row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
    <div class="form-group">
        <label class="form-label">Nombres *</label>
        <input type="text" name="nombres" class="form-control" required placeholder="Nombres completos">
    </div>
    <div class="form-group">
        <label class="form-label">Apellidos</label>
        <input type="text" name="apellidos" class="form-control" placeholder="Apellidos">
    </div>
</div>

<div class="form-group">
    <label class="form-label">Tipo de Cliente *</label>
    <select name="tipo_cliente" class="form-control" required>
        <option value="NATURAL">Persona Natural</option>
        <option value="JURIDICA">Persona Jurídica</option>
    </select>
</div>

<div class="form-group">
    <label class="form-label">Razón Social (Solo para empresas)</label>
    <input type="text" name="razon_social" class="form-control" placeholder="Nombre de la empresa">
</div>

<div class="row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
    <div class="form-group">
        <label class="form-label">Email *</label>
        <input type="email" name="email" class="form-control" required placeholder="correo@ejemplo.com">
    </div>
    <div class="form-group">
        <label class="form-label">Teléfono *</label>
        <input type="tel" name="telefono" class="form-control" required placeholder="3001234567">
    </div>
</div>

<div class="form-group">
    <label class="form-label">Dirección *</label>
    <textarea name="direccion" class="form-control" rows="2" required placeholder="Dirección completa"></textarea>
</div>

<div class="row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
    <div class="form-group">
        <label class="form-label">Ciudad *</label>
        <input type="text" name="ciudad" class="form-control" required placeholder="Ciudad">
    </div>
    <div class="form-group">
        <label class="form-label">Departamento *</label>
        <input type="text" name="departamento" class="form-control" required placeholder="Departamento">
    </div>
</div>
{% endblock %}
