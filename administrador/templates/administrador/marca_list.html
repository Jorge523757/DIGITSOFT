{% extends 'administrador/base_list.html' %}
{% load static %}

{% block title %}Marcas | Digit Soft{% endblock %}
{% block page_header %}Marcas{% endblock %}

{% block list_title %}Gestión de Marcas{% endblock %}
{% block list_description %}Administra las marcas de productos del sistema{% endblock %}

{% block table_headers %}
<th>ID</th>
<th>Nombre</th>
<th>Tipo</th>
<th>País</th>
<th>Productos</th>
<th>Estado</th>
<th style="width: 200px;">Acciones</th>
{% endblock %}

{% block table_body %}
{% if marcas %}
    {% for marca in marcas %}
    <tr>
        <td><strong>#{{ marca.id }}</strong></td>
        <td>{{ marca.nombre }}</td>
        <td>
            <span class="badge badge-info">
                {{ marca.get_tipo_marca_display }}
            </span>
        </td>
        <td>{{ marca.pais_origen|default:"No especificado" }}</td>
        <td>
            <span class="badge badge-secondary">
                {{ marca.producto_set.count }} productos
            </span>
        </td>
        <td>
            {% if marca.activa %}
                <span class="badge badge-success">Activa</span>
            {% else %}
                <span class="badge badge-danger">Inactiva</span>
            {% endif %}
        </td>
        <td>
            <div class="actions-cell">
                <button class="btn btn-info btn-sm" onclick="viewDetails({{ marca.id }})" title="Ver detalles">
                    <i class="fas fa-eye"></i>
                </button>
                <button class="btn btn-primary btn-sm" onclick="editRecord({{ marca.id }})" title="Editar">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn btn-warning btn-sm" onclick="viewHistory({{ marca.id }}, '{{ marca.nombre }}')" title="Historial">
                    <i class="fas fa-history"></i>
                </button>
                <button class="btn btn-danger btn-sm" onclick="deleteRecord({{ marca.id }}, '{{ marca.nombre }}')" title="Eliminar">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </td>
    </tr>
    {% endfor %}
{% else %}
    <tr>
        <td colspan="7" class="empty-state">
            <i class="fas fa-tag"></i>
            <p>No hay marcas registradas</p>
            <button class="btn btn-primary" onclick="openModal('createModal')">
                <i class="fas fa-plus"></i> Agregar Primera Marca
            </button>
        </td>
    </tr>
{% endif %}
{% endblock %}

{% block form_content %}
<div class="form-group">
    <label class="form-label">Nombre de la Marca *</label>
    {{ form.nombre }}
    {% if form.nombre.errors %}
        <small class="text-danger">{{ form.nombre.errors.0 }}</small>
    {% endif %}
</div>

<div class="row">
    <div class="col-md-6">
        <div class="form-group">
            <label class="form-label">Tipo de Marca *</label>
            {{ form.tipo_marca }}
            {% if form.tipo_marca.errors %}
                <small class="text-danger">{{ form.tipo_marca.errors.0 }}</small>
            {% endif %}
        </div>
    </div>
    <div class="col-md-6">
        <div class="form-group">
            <label class="form-label">País de Origen</label>
            {{ form.pais_origen }}
            {% if form.pais_origen.errors %}
                <small class="text-danger">{{ form.pais_origen.errors.0 }}</small>
            {% endif %}
        </div>
    </div>
</div>

<div class="form-group">
    <label class="form-label">Descripción</label>
    {{ form.descripcion }}
    {% if form.descripcion.errors %}
        <small class="text-danger">{{ form.descripcion.errors.0 }}</small>
    {% endif %}
</div>

<div class="form-group">
    <label class="form-label">Sitio Web</label>
    {{ form.sitio_web }}
    {% if form.sitio_web.errors %}
        <small class="text-danger">{{ form.sitio_web.errors.0 }}</small>
    {% endif %}
    <small class="text-muted">Ejemplo: https://www.ejemplo.com</small>
</div>

<div class="form-group">
    <label class="form-label">Logo</label>
    {{ form.logo }}
    {% if form.logo.errors %}
        <small class="text-danger">{{ form.logo.errors.0 }}</small>
    {% endif %}
    <small class="text-muted">Formatos permitidos: JPG, PNG. Tamaño máximo: 2MB</small>
</div>
{% endblock %}
