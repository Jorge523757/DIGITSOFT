{% extends 'administrador/base_list.html' %}
{% load static %}

{% block title %}Proveedores | Digit Soft{% endblock %}
{% block page_header %}Proveedores{% endblock %}

{% block list_title %}Gestión de Proveedores{% endblock %}
{% block list_description %}Administra los proveedores de productos y servicios{% endblock %}

{% block table_headers %}
<th>NIT/Documento</th>
<th>Razón Social</th>
<th>Categoría</th>
<th>Email</th>
<th>Teléfono</th>
<th>Calificación</th>
<th>Estado</th>
<th style="width: 200px;">Acciones</th>
{% endblock %}

{% block table_body %}
{% if proveedores %}
    {% for proveedor in proveedores %}
    <tr>
        <td><strong>{{ proveedor.numero_documento }}</strong></td>
        <td>{{ proveedor.razon_social }}</td>
        <td>
            <span class="badge badge-info">{{ proveedor.get_categoria_principal_display }}</span>
        </td>
        <td>{{ proveedor.email }}</td>
        <td>{{ proveedor.telefono }}</td>
        <td>⭐ {{ proveedor.calificacion|floatformat:1 }}</td>
        <td>
            {% if proveedor.activo %}
                <span class="badge badge-success">Activo</span>
            {% else %}
                <span class="badge badge-danger">Inactivo</span>
            {% endif %}
        </td>
        <td>
            <div class="actions-cell">
                <button class="btn btn-info btn-sm" onclick="viewDetails({{ proveedor.id }})" title="Ver detalles">
                    <i class="fas fa-eye"></i>
                </button>
                <button class="btn btn-primary btn-sm" onclick="editRecord({{ proveedor.id }})" title="Editar">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn btn-warning btn-sm" onclick="viewHistory({{ proveedor.id }}, '{{ proveedor.razon_social }}')" title="Historial">
                    <i class="fas fa-history"></i>
                </button>
                <button class="btn btn-danger btn-sm" onclick="deleteRecord({{ proveedor.id }}, '{{ proveedor.razon_social }}')" title="Eliminar">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </td>
    </tr>
    {% endfor %}
{% else %}
    <tr>
        <td colspan="8" class="empty-state">
            <i class="fas fa-building"></i>
            <p>No hay proveedores registrados</p>
            <button class="btn btn-primary" onclick="openModal('createModal')">
                <i class="fas fa-plus"></i> Agregar Primer Proveedor
            </button>
        </td>
    </tr>
{% endif %}
{% endblock %}

{% block form_content %}
<div class="row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
    <div class="form-group">
        <label class="form-label">Tipo de Documento *</label>
        <select name="tipo_documento" class="form-control" required>
            <option value="NIT">NIT</option>
            <option value="CC">Cédula de Ciudadanía</option>
            <option value="CE">Cédula de Extranjería</option>
        </select>
    </div>
    <div class="form-group">
        <label class="form-label">Número de Documento *</label>
        <input type="text" name="numero_documento" class="form-control" required placeholder="Ej: 900123456-7">
    </div>
</div>

<div class="row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
    <div class="form-group">
        <label class="form-label">Razón Social *</label>
        <input type="text" name="razon_social" class="form-control" required placeholder="Nombre legal de la empresa">
    </div>
    <div class="form-group">
        <label class="form-label">Nombre Comercial</label>
        <input type="text" name="nombre_comercial" class="form-control" placeholder="Nombre comercial">
    </div>
</div>

<div class="row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
    <div class="form-group">
        <label class="form-label">Email *</label>
        <input type="email" name="email" class="form-control" required placeholder="correo@proveedor.com">
    </div>
    <div class="form-group">
        <label class="form-label">Teléfono *</label>
        <input type="tel" name="telefono" class="form-control" required placeholder="6012345678">
    </div>
</div>

<div class="form-group">
    <label class="form-label">Categoría Principal *</label>
    <select name="categoria_principal" class="form-control" required>
        <option value="">Seleccione...</option>
        <option value="EQUIPOS">Equipos de Cómputo</option>
        <option value="COMPONENTES">Componentes y Partes</option>
        <option value="SOFTWARE">Software y Licencias</option>
        <option value="ACCESORIOS">Accesorios</option>
        <option value="CONSUMIBLES">Consumibles</option>
        <option value="SERVICIOS">Servicios</option>
    </select>
</div>

<div class="form-group">
    <label class="form-label">Dirección *</label>
    <textarea name="direccion" class="form-control" rows="2" required placeholder="Dirección completa"></textarea>
</div>

<div class="row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
    <div class="form-group">
        <label class="form-label">Ciudad *</label>
        <input type="text" name="ciudad" class="form-control" required placeholder="Ciudad">
    </div>
    <div class="form-group">
        <label class="form-label">Departamento *</label>
        <input type="text" name="departamento" class="form-control" required placeholder="Departamento">
    </div>
</div>

<div class="form-group">
    <label class="form-label">Contacto Principal *</label>
    <input type="text" name="contacto_principal" class="form-control" required placeholder="Nombre del contacto">
</div>

<div class="row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
    <div class="form-group">
        <label class="form-label">Email Contacto</label>
        <input type="email" name="email_contacto" class="form-control" placeholder="Email del contacto">
    </div>
    <div class="form-group">
        <label class="form-label">Teléfono Contacto</label>
        <input type="tel" name="telefono_contacto" class="form-control" placeholder="Teléfono del contacto">
    </div>
</div>

<div class="form-group">
    <label class="form-label">Condiciones de Pago</label>
    <textarea name="condiciones_pago" class="form-control" rows="2" placeholder="Ej: 30 días, Contado, etc."></textarea>
</div>

<div class="form-group">
    <label class="form-label">Tiempo de Entrega (días) *</label>
    <input type="number" name="tiempo_entrega_dias" class="form-control" required value="1" min="1">
</div>
{% endblock %}

